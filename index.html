<section id="clientes-section" class="p-6 hidden">
  <div class="bg-white rounded-lg shadow overflow-hidden">
    <!-- Cabeçalho -->
    <div class="p-6 border-b">
      <div class="flex justify-between items-center">
        <div>
          <h2 class="text-xl font-semibold text-gray-800">Gestão de Clientes</h2>
          <p class="text-sm text-gray-500">Cadastro e gerenciamento de clientes</p>
        </div>
        <button onclick="toggleClientForm()" id="new-client-btn" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition">
          <i class="fas fa-plus mr-2"></i>Novo Cliente
        </button>
      </div>
    </div>

    <!-- Formulário (oculto inicialmente) -->
    <div id="client-form" class="hidden px-6 pt-4 bg-gray-50 border-b">
      <form id="cadastro-cliente-form" class="grid grid-cols-1 md:grid-cols-3 gap-4 pb-6">
        <!-- Coluna 1 -->
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo*</label>
            <input type="text" id="cliente-nome" required class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">CPF*</label>
            <input type="text" id="cliente-cpf" required class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="000.000.000-00">
          </div>
        </div>
        
        <!-- Coluna 2 -->
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Contato*</label>
            <input type="tel" id="cliente-telefone" required class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="(00) 00000-0000">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">E-mail*</label>
            <input type="email" id="cliente-email" required class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
          </div>
        </div>
        
        <!-- Coluna 3 -->
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Plano*</label>
            <select id="cliente-plano" required class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500">
              <option value="">Selecione...</option>
              <option value="100mb">100 Mbps - R$ 99,90</option>
              <option value="200mb">200 Mbps - R$ 129,90</option>
              <option value="300mb">300 Mbps - R$ 159,90</option>
            </select>
          </div>
          <div class="flex space-x-4 pt-6">
            <button type="button" onclick="toggleClientForm()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
              Cancelar
            </button>
            <button type="submit" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
              Salvar
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- Lista de Clientes -->
    <div class="p-6">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cliente</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Contato</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Plano</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ações</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200" id="clientes-lista">
            <!-- Dados serão inseridos aqui via JavaScript -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>


// Dados iniciais (simulando um "banco de dados")
let clientes = [
  {
    id: 1,
    nome: "João Silva",
    cpf: "123.456.789-00",
    telefone: "(11) 99999-9999",
    email: "joao@provedor.com",
    plano: "200mb",
    status: "ativo"
  },
  {
    id: 2,
    nome: "Maria Souza",
    cpf: "987.654.321-00",
    telefone: "(11) 98888-8888",
    email: "maria@provedor.com",
    plano: "300mb",
    status: "ativo"
  }
];

// Função para renderizar a lista de clientes
function renderClientes() {
  const lista = document.getElementById('clientes-lista');
  lista.innerHTML = '';

  clientes.forEach(cliente => {
    const statusClass = cliente.status === 'ativo' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800';
    const planoText = {
      '100mb': '100 Mbps',
      '200mb': '200 Mbps',
      '300mb': '300 Mbps'
    }[cliente.plano];

    lista.innerHTML += `
      <tr>
        <td class="px-6 py-4 whitespace-nowrap">
          <div class="font-medium">${cliente.nome}</div>
          <div class="text-sm text-gray-500">${cliente.cpf}</div>
        </td>
        <td class="px-6 py-4 whitespace-nowrap">
          <div>${cliente.telefone}</div>
          <div class="text-sm text-gray-500">${cliente.email}</div>
        </td>
        <td class="px-6 py-4 whitespace-nowrap">
          <span class="font-medium">${planoText}</span>
        </td>
        <td class="px-6 py-4 whitespace-nowrap">
          <span class="px-2 py-1 text-xs rounded-full ${statusClass}">
            ${cliente.status === 'ativo' ? 'Ativo' : 'Pendente'}
          </span>
        </td>
        <td class="px-6 py-4 whitespace-nowrap">
          <button onclick="editarCliente(${cliente.id})" class="text-blue-500 hover:text-blue-700 mr-3">
            <i class="fas fa-edit"></i>
          </button>
          <button onclick="excluirCliente(${cliente.id})" class="text-red-500 hover:text-red-700">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
    `;
  });
}

// Função para mostrar/ocultar formulário
function toggleClientForm(editando = false) {
  const form = document.getElementById('client-form');
  const btn = document.getElementById('new-client-btn');
  
  form.classList.toggle('hidden');
  
  if (form.classList.contains('hidden')) {
    btn.innerHTML = '<i class="fas fa-plus mr-2"></i>Novo Cliente';
    document.getElementById('cadastro-cliente-form').reset();
  } else {
    btn.innerHTML = '<i class="fas fa-times mr-2"></i>Cancelar';
  }
}

// Função para salvar cliente (novo ou edição)
document.getElementById('cadastro-cliente-form').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const cliente = {
    id: document.getElementById('cliente-id')?.value || clientes.length + 1,
    nome: document.getElementById('cliente-nome').value,
    cpf: document.getElementById('cliente-cpf').value,
    telefone: document.getElementById('cliente-telefone').value,
    email: document.getElementById('cliente-email').value,
    plano: document.getElementById('cliente-plano').value,
    status: 'ativo'
  };

  // Verifica se é edição
  const index = clientes.findIndex(c => c.id == cliente.id);
  if (index >= 0) {
    clientes[index] = cliente;
  } else {
    clientes.push(cliente);
  }

  renderClientes();
  toggleClientForm();
  showAlert('Cliente salvo com sucesso!', 'success');
});

// Funções auxiliares
function editarCliente(id) {
  const cliente = clientes.find(c => c.id == id);
  if (!cliente) return;

  document.getElementById('cliente-nome').value = cliente.nome;
  document.getElementById('cliente-cpf').value = cliente.cpf;
  document.getElementById('cliente-telefone').value = cliente.telefone;
  document.getElementById('cliente-email').value = cliente.email;
  document.getElementById('cliente-plano').value = cliente.plano;

  // Cria um campo hidden para o ID se não existir
  if (!document.getElementById('cliente-id')) {
    const input = document.createElement('input');
    input.type = 'hidden';
    input.id = 'cliente-id';
    input.value = cliente.id;
    document.getElementById('cadastro-cliente-form').appendChild(input);
  } else {
    document.getElementById('cliente-id').value = cliente.id;
  }

  toggleClientForm(true);
}

function excluirCliente(id) {
  if (confirm('Tem certeza que deseja excluir este cliente?')) {
    clientes = clientes.filter(c => c.id != id);
    renderClientes();
    showAlert('Cliente excluído com sucesso!', 'success');
  }
}

function showAlert(message, type = 'success') {
  const alert = document.createElement('div');
  alert.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white ${
    type === 'success' ? 'bg-green-500' : 'bg-red-500'
  }`;
  alert.textContent = message;
  document.body.appendChild(alert);
  
  setTimeout(() => {
    alert.remove();
  }, 3000);
}

// Inicialização
document.addEventListener("DOMContentLoaded", function() {
  showSection('dashboard');
  renderClientes();
});
